{% extends "base.html" %}
{% load static %}
{% load custom_tags %}
{% block main %}
<style>
  @media (min-width: 992px) {
    .col-lg-5 {
        flex: 25%;
        max-width: 25%;
    }
}
@media (min-width: 992px) {
  .col-lg-7 {
      flex: 70%;
      max-width: 70%;
  }
}
  .quantity {
    display: flex;
    align-items: center;
    background-color: #f5f5f5;
    border-radius: 4px;
    padding: 5px 10px;
  }
  
  .quantity .btn {
    background-color: transparent;
    color: #333;
    border: none;
  }
  

  
  .quantity .form-control {
    text-align: center;
    border: none;
    background-color: transparent;
  }
  

  .p-30 {
    padding: 30px;
    direction: rtl;
  }

  .px-3 {
    
    background-color: #007bff;
}


.quantity button {
  width: 38px; /* Ø¹Ø±Ø¶ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ */
}


.btn-primary {
  min-width: 200px;
  border-radius: 20px;
  height: 40px;
}

.custom-margin {
  margin-right: 60px;
  height: 35px;
  border-radius: 30px;
}
.tab-pane {
  max-height: 300px; 
  overflow-y: auto; 
}
</style>
    <!-- Shop Detail Start -->
    <div class="container-fluid pb-5">
      <div class="row px-xl-5">

        <div class="col-lg-5 mb-30">
          <div id="product-carousel" class="carousel slide" data-ride="carousel">
            <!-- Ù†Ù…Ø§ÛŒØ´ ØªØµÙˆÛŒØ± Ø§ØµÙ„ÛŒ Ù…Ø­ØµÙˆÙ„ -->
            <div class="carousel-inner bg-light mainImage">
              <div class="carousel-item active">
                <img class="d-block w-100" src="{{ single_product.image.url }}" alt="{{ single_product.title }}" />
              </div>
            </div>
            <ul class="thumb list-unstyled">
              <!-- Ù†Ù…Ø§ÛŒØ´ ØªØµÙˆÛŒØ± Ø§ØµÙ„ÛŒ Ù…Ø­ØµÙˆÙ„ Ø¯Ø± Ù„ÛŒØ³Øª ØªØµØ§ÙˆÛŒØ± Ú©ÙˆÚ†Ú© -->
              <li class="list-inline-item">
                <a href="{{ single_product.image.url }}">
                  <img src="{{ single_product.image.url }}" alt="{{ single_product.title }}">
                </a>
              </li>
              <!-- Ø­Ù„Ù‚Ù‡ Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ ØªØµØ§ÙˆÛŒØ± Ù…ÙˆØ¬ÙˆØ¯ Ø¯Ø± Ú¯Ø§Ù„Ø±ÛŒ Ù…Ø­ØµÙˆÙ„ -->
              {% for gallery_item in product_gallery %}
              <li class="list-inline-item">
                <a href="{{ gallery_item.image.url }}">
                  <img src="{{ gallery_item.image.url }}" alt="{{ single_product.title }}">
                </a>
              </li>
              {% endfor %}
            </ul>
          </div>
        </div>


        <form action="{% url 'cart:add_to_cart_page' single_product.id %}" method='POST' class="col-lg-7 h-auto mb-30">
          {% csrf_token %}
          <article >
            <div class="h-100 bg-light p-30">
              <h3>{{single_product.title}}</h3>
              <div class="d-flex mb-3">
                <div class="rating-star text-right" style='direction:ltr'>
                  <span>
                    <i class="fa fa-star{% if single_product.averageReview < 0.5 %}-o{% elif single_product.averageReview >= 0.5 and single_product.averageReview < 1 %}-half-o {% endif %}" aria-hidden="true"></i>
                    <i class="fa fa-star{% if single_product.averageReview < 1.5 %}-o{% elif single_product.averageReview >= 1.5 and single_product.averageReview < 2 %}-half-o {% endif %}" aria-hidden="true"></i>
                    <i class="fa fa-star{% if single_product.averageReview < 2.5 %}-o{% elif single_product.averageReview >= 2.5 and single_product.averageReview < 3 %}-half-o {% endif %}" aria-hidden="true"></i>
                    <i class="fa fa-star{% if single_product.averageReview < 3.5 %}-o{% elif single_product.averageReview >= 3.5 and single_product.averageReview < 4 %}-half-o {% endif %}" aria-hidden="true"></i>
                    <i class="fa fa-star{% if single_product.averageReview < 4.5 %}-o{% elif single_product.averageReview >= 4.5 and single_product.averageReview < 5 %}-half-o {% endif %}" aria-hidden="true"></i>
                  </span>
                </div>
                <small class="pt-1">(<span>{{single_product.countReview}} </span> : Ø¨Ø±Ø±Ø³ÛŒ Ù‡Ø§)</small>
              </div>
              {% if single_product.discount == 0 %}
                <h3>{{ single_product.price|format_price }}</h3>
              {% endif %}
              {% if single_product.discount > 0 %}
                <h3>{{ single_product.discount_price|format_price }}</h3>
                {% comment %} <h5>%{{product.discount}}</h5>   Ù†Ù…Ø§ÛŒØ´ Ø¯Ø±ØµØ¯ ØªØ®ÙÛŒÙ    {% endcomment %}
                <h3 class="text-muted ml-2"><del>{{ single_product.price|format_price }}</del></h3>
              {% endif %}
              {% comment %} <h3 class="font-weight-semi-bold mb-4">${{single_product.price}}</h3> {% endcomment %}
              <p class="mb-4">{{ single_product.concise }}</p>
              <hr>
              <div class="row align-items-center mb-4">
                <div class="col-12 col-md-6 mb-3 mb-md-0">
                  <div class="d-flex align-items-center">
                    <strong class="text-dark mr-3">Ø±Ù†Ú¯:</strong>
                    <select name='color' class='form-control mr-3' style='min-width: 150px;' required>
                      <option value='' disabled selected>Ø§Ù†ØªØ®Ø§Ø¨ Ø±Ù†Ú¯</option>
                      {% for variation in color_variations %}
                        <option value='{{ variation.variation_value | lower }}'>{{ variation.variation_value | capfirst }}</option>
                      {% endfor %}
                    </select>
                  </div>
                </div>
                <div class="col-12 col-md-6">
                  <div class="d-flex align-items-center">
                    <strong class="text-dark mr-3">Ø§Ù†Ø¯Ø§Ø²Ù‡:</strong>
                    <select name='size' class='form-control mr-3' style='min-width: 150px;' required>
                      <option value='' disabled selected>Ø§Ù†ØªØ®Ø§Ø¨ Ø§Ù†Ø¯Ø§Ø²Ù‡</option>
                      {% for variation in size_variations %}
                        <option value='{{ variation.variation_value | lower }}'>{{ variation.variation_value | capfirst }}</option>
                      {% endfor %}
                    </select>
                  </div>
                </div>
              </div>
              <div class="row align-items-center">
                <div class="col-md-6 text-right">
                  {% if single_product.stock >= 1 %}
                  <form action="{% url 'cart:add_to_cart_page' single_product.id %}" method="post">
                    {% csrf_token %}
                    <div class="d-flex align-items-center justify-content-start">
                      <div class="quantity d-flex align-items-center custom-margin">
                          <button type="button" class="btn btn-light btn-minus">
                              <i class="fa fa-minus"></i>
                          </button>
                          <input name="quantity" class="form-control mx-2" value="1" min="1" max="{{ single_product.stock }}" style="width: 60px;">
                          <button type="button" class="btn btn-light btn-plus">
                              <i class="fa fa-plus"></i>
                          </button>
                      </div>
                      <div>
                          <button type="submit" class="btn btn-primary px-3" style='margin-right: 5%;'>
                              <i class="fa fa-shopping-cart mr-2"></i> Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø¨Ù‡ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯
                          </button>
                      </div>
                  </div>
                  
                  
                  </form>
                  {% else %}
                  <h5 class="out-of-stock mb-0">
                    ğŸ˜” Ø§ØªÙ…Ø§Ù… Ù…ÙˆØ¬ÙˆØ¯ÛŒ âŒ
                  </h5>
                  {% endif %}
                </div>
              </div>
              </div>
              
              
              <div class="d-flex pt-2">
                <strong class="text-dark mr-2">Ø§Ø´ØªØ±Ø§Ú© Ú¯Ø²Ø§Ø±ÛŒ :</strong>
                <div class="d-inline-flex">
                  <a class="text-dark px-2" href=""><i class="fab fa-facebook-f"></i></a>
                  <a class="text-dark px-2" href=""><i class="fab fa-twitter"></i></a>
                  <a class="text-dark px-2" href=""><i class="fab fa-linkedin-in"></i></a>
                  <a class="text-dark px-2" href=""><i class="fab fa-pinterest"></i></a>
                </div>
              </div> 
            </div>
          </article>
        </form>


      </div>
      <div class="row px-xl-5">
        <div class="col">
          <div class="bg-light p-30">
            <div class="nav nav-tabs mb-4">
              <a class="nav-item nav-link text-dark active" data-toggle="tab" href="#tab-pane-1">ØªÙˆØ¶ÛŒØ­Ø§Øª</a>
              {% comment %} <a class="nav-item nav-link text-dark" data-toggle="tab" href="#tab-pane-2">Ø¬Ø²Ø¦ÛŒØ§Øª Ú©Ø§Ù…Ù„</a> {% endcomment %}
              <a class="nav-item nav-link text-dark" data-toggle="tab" href="#tab-pane-3">Ù†Ø¸Ø±Ø§Øª <span>{{single_product.countReview}} </span></a>
            </div>
            <div class="tab-content">
              <div class="tab-pane fade show active" id="tab-pane-1">
                <h4 class="mb-3">ØªÙˆØ¶ÛŒØ­Ø§Øª Ù…Ø­ØµÙˆÙ„</h4>
                <p>{{single_product.description}}.</p>
              </div>
              {% comment %} <div class="tab-pane fade" id="tab-pane-2">
                <h4 class="mb-3">Ø¬Ø²Ø¦ÛŒØ§Øª Ù…Ø­ØµÙˆÙ„</h4>
                <p>{{single_product.information}}.</p>
              </div> {% endcomment %}
              <div class="tab-pane fade" id="tab-pane-3">

                <div class="row">
                  <div class="col-md-12 direction">
                    <form action="{% url 'submit_review_page' single_product.id %}" method="POST">
                      {% csrf_token %}
                      <h4 class="text-right">Ù†Ø¸Ø± Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯</h4>
                      {% comment %} {{single_product.averageReview}} {% endcomment %}
                      <div class="rating-star text-right" style='direction:ltr'>
                        <span>
                          <i class="fa fa-star{% if single_product.averageReview < 0.5 %}-o{% elif single_product.averageReview >= 0.5 and single_product.averageReview < 1 %}-half-o {% endif %}" aria-hidden="true"></i>
                          <i class="fa fa-star{% if single_product.averageReview < 1.5 %}-o{% elif single_product.averageReview >= 1.5 and single_product.averageReview < 2 %}-half-o {% endif %}" aria-hidden="true"></i>
                          <i class="fa fa-star{% if single_product.averageReview < 2.5 %}-o{% elif single_product.averageReview >= 2.5 and single_product.averageReview < 3 %}-half-o {% endif %}" aria-hidden="true"></i>
                          <i class="fa fa-star{% if single_product.averageReview < 3.5 %}-o{% elif single_product.averageReview >= 3.5 and single_product.averageReview < 4 %}-half-o {% endif %}" aria-hidden="true"></i>
                          <i class="fa fa-star{% if single_product.averageReview < 4.5 %}-o{% elif single_product.averageReview >= 4.5 and single_product.averageReview < 5 %}-half-o {% endif %}" aria-hidden="true"></i>
                        </span>
                      </div>
                      <div>
                        {% include "alerts/alerts.html" %}
                        <div class="form-group text-right">
                          <label>Ø§ÛŒÙ† Ù…Ø­ØµÙˆÙ„ Ø±Ø§ Ú†Ú¯ÙˆÙ†Ù‡ Ø§Ø±Ø²ÛŒØ§Ø¨ÛŒ Ù…ÛŒ Ú©Ù†ÛŒØ¯ØŸ</label>
                          <br>
                          <div class="rate" style='direction:ltr'>
                            <input type="radio" name="rating" id="rating10" value="5" required />
                            <label for="rating10" title="5"></label>
                            <input type="radio" name="rating" id="rating9" value="4.5" required />
                            <label for="rating9" title="4.5" class="half"></label>
                            <input type="radio" name="rating" id="rating8" value="4" required />
                            <label for="rating8" title="4"></label>
                            <input type="radio" name="rating" id="rating7" value="3.5" required />
                            <label for="rating7" title="3.5" class="half"></label>
                            <input type="radio" name="rating" id="rating6" value="3" required />
                            <label for="rating6" title="3"></label>
                            <input type="radio" name="rating" id="rating5" value="2.5" required />
                            <label for="rating5" title="2.5" class="half"></label>
                            <input type="radio" name="rating" id="rating4" value="2" required />
                            <label for="rating4" title="2"></label>
                            <input type="radio" name="rating" id="rating3" value="1.5" required />
                            <label for="rating3" title="1.5" class="half"></label>
                            <input type="radio" name="rating" id="rating2" value="1" required />
                            <label for="rating2" title="1"></label>
                            <input type="radio" name="rating" id="rating1" value="0.5" required />
                            <label for="rating1" title="0.5" class="half"></label>
                          </div>
                        </div>
                        <div class="form-group text-right">
                         Ø¹Ù†ÙˆØ§Ù†  :
                          <input type="text" class="form-control" name="subject">
                        </div>
                        <div class="form-group text-right">
                          Ù„Ø·ÙØ§ Ù†Ø¸Ø± Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯ :
                          <textarea name="review" rows="4" class="form-control"></textarea>
                        </div>
                        {% if user.is_authenticated %}
                          {% comment %} {% if orderproduct %} {% endcomment %}
                            <input type="submit" value="Submit Review" class="btn btn-primary">
                          {% comment %} {% else %} {% endcomment %}
                            <p>Ø¨Ø±Ø§ÛŒ Ø§Ø±Ø³Ø§Ù„ Ù†Ø¸Ø± Ø¨Ø§ÛŒØ¯ Ø§ÛŒÙ† Ù…Ø­ØµÙˆÙ„ Ø±Ø§ Ø®Ø±ÛŒØ¯Ø§Ø±ÛŒ Ú©Ø±Ø¯Ù‡ Ø¨Ø§Ø´ÛŒØ¯.</p>
                          {% comment %} {% endif %} {% endcomment %}
                        {% else %}
                        <p>Ø¨Ø±Ø§ÛŒ Ø§Ø±Ø³Ø§Ù„ Ù†Ø¸Ø± Ø¨Ø§ÛŒØ¯ Ù„Ø§Ú¯ÛŒÙ† Ú©Ø±Ø¯Ù‡ Ø¨Ø§Ø´ÛŒØ¯ .<span><a style='color: #3872e0; font-weight: bold;' href="{% url 'account:login_page' %}">Ø§Ú©Ù†ÙˆÙ† ÙˆØ§Ø±Ø¯ Ø´ÙˆÛŒØ¯</a></span></p>
                        {% endif %}
                      </div>
                    </form>
                    <br>

                    <h3 class="text-right">Ù†Ø¸Ø±Ø§Øª Ù…Ø´ØªØ±ÛŒØ§Ù†</h3>
                    {% for review in reviews %}
                    <div class="card mb-3">
                      <div class="card-body">
                        <div class="d-flex justify-content-between">
                          <h5 class="card-title text-right">{{ review.user.full_name }}</h5>
                          <small class="text-muted text-left">{{ review.updated_at }}</small>
                        </div>
                        <div class="rating-star text-right" style='direction:ltr'>
                          <span>
                            <i class="fa fa-star{% if review.rating == 0.5 %}-half-o{% elif review.rating < 1 %}-o {% endif %}" aria-hidden="true"></i>
                            <i class="fa fa-star{% if review.rating == 1.5 %}-half-o{% elif review.rating < 2 %}-o {% endif %}" aria-hidden="true"></i>
                            <i class="fa fa-star{% if review.rating == 2.5 %}-half-o{% elif review.rating < 3 %}-o {% endif %}" aria-hidden="true"></i>
                            <i class="fa fa-star{% if review.rating == 3.5 %}-half-o{% elif review.rating < 4 %}-o {% endif %}" aria-hidden="true"></i>
                            <i class="fa fa-star{% if review.rating == 4.5 %}-half-o{% elif review.rating < 5 %}-o {% endif %}" aria-hidden="true"></i>
                          </span>
                          <h5>{{review.subject}} </h5>
                        </div>
                        <p class="card-text mb-2">{{ review.review }}</p>
                      </div>
                    </div>
                    {% endfor %}
                    
                  </div>
                </div>
                  <!-- col.// --> 

              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Shop Detail End -->

    <!-- Products Start -->
    <div class="container-fluid py-5">
      <h2 class="section-title position-relative text-uppercase mx-xl-5 mb-4"><span class="bg-secondary pr-3">You May Also Like</span></h2>
      <div class="row px-xl-5">
        <div class="col">
          <div class="owl-carousel related-carousel">
            <div class="product-item bg-light">
              <div class="product-img position-relative overflow-hidden">
                <img class="img-fluid w-100" src="" alt="" />
                <div class="product-action">
                  <a class="btn btn-outline-dark btn-square" href=""><i class="fa fa-shopping-cart"></i></a>
                  <a class="btn btn-outline-dark btn-square" href=""><i class="far fa-heart"></i></a>
                  <a class="btn btn-outline-dark btn-square" href=""><i class="fa fa-sync-alt"></i></a>
                  <a class="btn btn-outline-dark btn-square" href=""><i class="fa fa-search"></i></a>
                </div>
              </div>
              <div class="text-center py-4">
                <a class="h6 text-decoration-none text-truncate" href="">Product Name Goes Here</a>
                <div class="d-flex align-items-center justify-content-center mt-2">
                  <h5>$123.00</h5>
                  <h6 class="text-muted ml-2"><del>$123.00</del></h6>
                </div>
                <div class="d-flex align-items-center justify-content-center mb-1">
                  <small class="fa fa-star text-primary mr-1"></small>
                  <small class="fa fa-star text-primary mr-1"></small>
                  <small class="fa fa-star text-primary mr-1"></small>
                  <small class="fa fa-star text-primary mr-1"></small>
                  <small class="fa fa-star text-primary mr-1"></small>
                  <small>(99)</small>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Products End -->
    {% endblock main %}